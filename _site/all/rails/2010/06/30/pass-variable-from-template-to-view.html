<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8"  />
	<meta name="description" content="Kyle Halladay Game Development" />
	<meta name="keywords" content="life,code,software,development,games,ludology,indie" />
	<link rel="stylesheet" type="text/css" href="/css/default.css" />
	<link rel="stylesheet" type="text/css" href="/css/pretty_code.css" />

<title>Kyle Halladay - Toronto Game Developer</title>
</head>

<body>
	<div id="wrap">
		<div id="header">
			<p id="toplinks">

			</p>

			<h1><a href="/"><div id="logo"></div><span class="fade">Kyle Halladay</span></a></h1>
			<div class="slogan"> 
					<a href="/os.html" class="red">Life</a> ||
					<a href="/os.html" class="lime">Game Dev</a> ||
					<a href="/life.html" class="purple">My Work</a> ||
					<a href="/life.html" class="paleorange">About Me</a>
			</div>

	</div>
<div id="content">  
  <div id="post">
<h2>Pass variable from template to view</h2>

<p class="publish_date">30 Jun 2010</p>

<p>Maybe I'm missing a code smell but I needed to pass a variable from my template to my view.  The template renders a very generic form and I wanted to add a field to it from my view.  I wanted the code to look something like this:</p>
<pre name="code" class="ruby">
  &lt;% render :layout =&gt; &#x27;/layouts/confirm&#x27;,
            :locals =&gt; { :entity =&gt; @voucher } do |f| %&gt;
      &lt;%= f.input :redeemed_by, :label=&gt;&quot;Voucher Used By&quot;  %&gt;
  &lt;% end %&gt;
</pre>
<p>I'm using formtastic and the |f| coming down the chute is meant to be the formtastic form builder object.</p>

<p>I tried adding a yield to my layout file like this:</p>
<pre name="code" class="ruby">
  &lt;% semantic_form_for(entity) do |f| %&gt;
    &lt;%= yield f %&gt;
    &lt;% f.buttons do %&gt;
      &lt;%= submit_tag &quot;Confirm&quot; %&gt;
      &lt;%= submit_tag &quot;Cancel&quot;, :name =&gt; &quot;cancel&quot;, :class=&gt;&quot;submit-other&quot; %&gt;
    &lt;% end  %&gt;
  &lt;% end %&gt;
</pre>
<p>That resulted in this error message:</p>
<pre>
  `@content_for_#&lt;Formtastic::SemanticFormBuilder:0x10ae6b490&gt;' is not allowed as an instance variable name
</pre>
<p>So, after about an hour of searching and reading I tried to figure out how to turn the entire layout file into a helper method.  That didn't look like something I wanted to do.  Then I started, as I said to my boss, "typing in random crap" and found something that worked:</p>
<h3>Layout:</h3>
<pre name="code" class="ruby">
  &lt;% semantic_form_for(entity) do |f| %&gt;
    &lt;%= yield :ignore, f %&gt;
    &lt;% f.buttons do %&gt;
      &lt;%= submit_tag &quot;Confirm&quot; %&gt;
      &lt;%= submit_tag &quot;Cancel&quot;, :name =&gt; &quot;cancel&quot;, :class=&gt;&quot;submit-other&quot; %&gt;
    &lt;% end  %&gt;
  &lt;% end %&gt;
</pre>
<h3>View:</h3>
<pre name="code" class="ruby">
  &lt;% render :layout =&gt; &#x27;/layouts/confirm&#x27;,
            :locals =&gt; { :entity =&gt; @voucher } do |ignore, f| %&gt;
      &lt;%= f.input :redeemed_by, :label=&gt;&quot;Voucher Used By&quot;  %&gt;
  &lt;% end %&gt;
</pre>
<p>TADA!</p>
</div>


<div id="related">
  <h3>Possibly Related Posts</h3>
  <ul class="posts">
    
      <li><span>26 Mar 2012</span> &raquo; <a href="/all/life/2012/03/26/steep-learning-curve-is-a-misnomer.html">Steep Learning Curve</a></li>
    
      <li><span>16 Sep 2011</span> &raquo; <a href="/all/rails/2011/09/16/pgerror-unable-to-connect-on-port-5432.html">PGError Unable to connect on port 5432</a></li>
    
      <li><span>07 Feb 2011</span> &raquo; <a href="/all/rails/2011/02/07/slideshowpro-director-ruby-wrapper.html">SlideShowPro Director Ruby API Wrapper</a></li>
    
  </ul>
</div>

<!-- This is for code colorization which doesn't seem to work very well in IE... i guess I don't care very much -->
<script language="javascript" src="http://communicatopia.s3.amazonaws.com/js/shCore.js"></script>
<script language="javascript" src="http://communicatopia.s3.amazonaws.com/js/shBrushRuby.js"></script>
<script language="javascript" src="http://communicatopia.s3.amazonaws.com/js/shBrushPhp.js"></script>
<script language="javascript" src="http://communicatopia.s3.amazonaws.com/js/shBrushXml.js"></script>
<script language="javascript" src="http://communicatopia.s3.amazonaws.com/js/shBrushCss.js"></script>
<script language="javascript" src="http://communicatopia.s3.amazonaws.com/js/shBrushBash.js"></script>
<script language="javascript" src="http://communicatopia.s3.amazonaws.com/js/shBrushJScript.js"></script>
<script language="javascript">
dp.SyntaxHighlighter.ClipboardSwf = 'http://communicatopia.s3.amazonaws.com/js/clipboard.swf';
//name, showGutter, showControls, collapseAll, firstLine , showColumns
dp.SyntaxHighlighter.HighlightAll('code',false, false,false,1,false);
</script>
<br>
<br>
</div>

<div id="footer">

	<a href="mailto:k.mj.halladay@gmail.com" class="footerlink">E-mail</a> |
    <a href="http://ca.linkedin.com/pub/kyle-halladay/2b/658/a14/" class="footerlink">LinkedIn</a> |
    <a href="http://twitter.com/khalladay" class="footerlink">Twitter</a>

<p>&copy; 2013 <a href="/about.html" class="footerlink">Kyle Halladay</a>

</div>
</div>
</body>
</html>

