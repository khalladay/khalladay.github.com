<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8"  />
	<meta name="description" content="Kyle Halladay Game Development" />
	<meta name="keywords" content="life,code,software,development,games,ludology,indie" />
	<link rel="stylesheet" type="text/css" href="/css/default.css" />
	<link rel="stylesheet" type="text/css" href="/css/pretty_code.css" />

<title>Kyle Halladay - Toronto Game Developer</title>
</head>

<body>
	<div id="wrap">
		<div id="header">
			<p id="toplinks">

			</p>

			<h1><a href="/"><div id="logo"></div><span class="fade">Kyle Halladay</span></a></h1>
			<div class="slogan"> 
					<a href="/os.html" class="red">Life</a> ||
					<a href="/os.html" class="lime">Game Dev</a> ||
					<a href="/life.html" class="purple">My Work</a> ||
					<a href="/life.html" class="paleorange">About Me</a>
			</div>

	</div>
<div id="content">  
  <div id="post">
<h2>ImageMagick Montage Command</h2>
<p class="publish_date">30 Oct 2009</p>
<p>I&#8217;ve been working on a video upload/encoding feature for spokt.com this past week. For photos we generate thumbnails but I wanted more for video.  I wanted some sort of a film strip so I have the video encoding process spit out a bunch of still frames. I decided I wanted a long strip of frames to run horizontally so in order to optimize for bandwidth and http requests I knew I needed to shrink the frames and combine them into one wide image. Since I learned software the easy-at-first-but-the-ease-ends-soon-after (<span class="caps">AKA</span> Microsoft) way I started thinking about the math that would be required &#8211; widths, and calculating and shrinking and adding&#8230; it wouldn&#8217;t be a complicated algorithm but it would take some time to implement.</p>
<p>Luckily for me I&#8217;ve been using open source tools for a while and so before I start doing something I try to find an open source solution.  I started evaluating image libraries like devIL, I&#8217;m already using imagemagick with paperclip so I poked around their documentation.  For a library made for images they have some terribly ugly example artwork. I wasn&#8217;t having much luck because I was asking google to solve my little problems. I asked it to solve the entire problem all at once &#8220;combine multiple images imagemagick&#8221; and boom: the &#8220;montage&#8221; command.</p>
<pre style="width:740px">
montage -geometry +2+0 -tile 10x1 -resize x50 -background black thumb_*.png film_strip.png
</pre>
<p>This command combines all the files that match the pattern thumb_*.png into a 10&#215;1 grid, adds a black 2 pixel border to the top and bottom.</p>
<p><img src="/images/filmstrip.png" title="10x2 filmstrip of video still frames" alt="10x2 filmstrip of video still frames" /></p>
<p>All I had to do was download the images from the s3 into my tmp folder, issue this command (with proper paths) then upload the resultant file back to the s3. And then make it scroll back and forth on mouseover &#8211; but that is another story.</p>
</div>


<div id="related">
  <h3>Possibly Related Posts</h3>
  <ul class="posts">
    
      <li><span>26 Mar 2012</span> &raquo; <a href="/all/life/2012/03/26/steep-learning-curve-is-a-misnomer.html">Steep Learning Curve</a></li>
    
      <li><span>16 Sep 2011</span> &raquo; <a href="/all/rails/2011/09/16/pgerror-unable-to-connect-on-port-5432.html">PGError Unable to connect on port 5432</a></li>
    
      <li><span>07 Feb 2011</span> &raquo; <a href="/all/rails/2011/02/07/slideshowpro-director-ruby-wrapper.html">SlideShowPro Director Ruby API Wrapper</a></li>
    
  </ul>
</div>

<!-- This is for code colorization which doesn't seem to work very well in IE... i guess I don't care very much -->
<script language="javascript" src="http://communicatopia.s3.amazonaws.com/js/shCore.js"></script>
<script language="javascript" src="http://communicatopia.s3.amazonaws.com/js/shBrushRuby.js"></script>
<script language="javascript" src="http://communicatopia.s3.amazonaws.com/js/shBrushPhp.js"></script>
<script language="javascript" src="http://communicatopia.s3.amazonaws.com/js/shBrushXml.js"></script>
<script language="javascript" src="http://communicatopia.s3.amazonaws.com/js/shBrushCss.js"></script>
<script language="javascript" src="http://communicatopia.s3.amazonaws.com/js/shBrushBash.js"></script>
<script language="javascript" src="http://communicatopia.s3.amazonaws.com/js/shBrushJScript.js"></script>
<script language="javascript">
dp.SyntaxHighlighter.ClipboardSwf = 'http://communicatopia.s3.amazonaws.com/js/clipboard.swf';
//name, showGutter, showControls, collapseAll, firstLine , showColumns
dp.SyntaxHighlighter.HighlightAll('code',false, false,false,1,false);
</script>
<br>
<br>
</div>

<div id="footer">

	<a href="mailto:k.mj.halladay@gmail.com" class="footerlink">E-mail</a> |
    <a href="http://ca.linkedin.com/pub/kyle-halladay/2b/658/a14/" class="footerlink">LinkedIn</a> |
    <a href="http://twitter.com/khalladay" class="footerlink">Twitter</a>

<p>&copy; 2013 <a href="/about.html" class="footerlink">Kyle Halladay</a>

</div>
</div>
</body>
</html>

